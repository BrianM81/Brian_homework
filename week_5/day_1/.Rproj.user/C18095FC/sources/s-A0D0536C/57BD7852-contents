---
title: "R Notebook"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Cmd+Shift+Enter*. 


# Facets
One plot -> many plots
Extra layer, facet_wrap() or facet_grid()

```{r}
library(ggplot2)

ggplot(ChickWeight) +
  aes(x = Time, y = weight, group = Chick, colour = Diet) +
  geom_line() + facet_wrap(~ Diet, ncol =4) #ncol = 4 forces the plots to be on the same y axis

# ~ = 'varies with", "depending on"
```

```{r}
library(CodeClanData)
benefits
```

```{r}
ggplot(benefits) +
  geom_histogram(aes(x = age), col = "white") + #This means the outside of the bars are white
                   facet_wrap(~ sex, nrow =2)
```

```{r}
ggplot(benefits) +
  geom_histogram(aes(x = age, fill = sex), col = "white") +
  facet_wrap(married ~ sex)
```

#To be slightly more efficient can replace facet wrap with facet grid
```{r}
ggplot(benefits) +
  geom_histogram(aes(x = age, fill = sex), col = "white") +
  facet_grid(married ~ sex) #facet_grid shows empty values
```

#Task, ask whether the respondents have children, 

```{r}
ggplot(benefits) +
  geom_histogram(aes(x = age), col = "white", fill = "dark green") +
  facet_grid(married ~ dkids)
```

#Also use label both if wanted

```{r}
ggplot(benefits) +
  geom_histogram(aes(x = age, fill = sex), col = "white") +
  facet_grid(married ~ dkids, labeller = "label_both") #rows ` columns
```

#Scales

```{r}
ggplot(benefits) +
  geom_histogram(aes(x = age), col = "white", fill = "dark green") +
  facet_wrap(~ sex, ncol = 2, scales = "free_y")
```

An alternative, where everything is "free" on axes

```{r}
ggplot(benefits) +
  geom_histogram(aes(x = age), col = "white", fill = "dark green") +
  facet_wrap(~ sex, ncol = 2, scales = "free")
```

#How do you facet if variable you want to facet on is continuous?
#Binning! (not meaning to bin your data, think about putting into trays, say 170-180, 180-190, 190-200)
need to use judgement for this like goldilocks, what is "just right"?, not too much, not too many
cut_interval(x, n): divides data into n bins, each bin same width
cut_width(x, width): " " "bins of width "width"
cut_numbr(x, n): divides data into n bins, each containing roughly the same number of data points (each bin may be of different width)
Lets look at benefits data, we'll do somr dplyer, so lets use tidyverse

```{r}
library(tidyverse)

benefits <- benefits %>%
  mutate(
    tenure_interval = cut_interval(tenure, 4),
    tenure_width = cut_width(tenure, 15),
    tenure_number = cut_number(tenure, 4)
  )

benefits %>%
  select(age, tenure, tenure_interval, tenure_width, tenure_number)
```


```{r}
ggplot(benefits) +
  geom_histogram(aes(x = age), col = "white") +
  facet_wrap(~ tenure_width)
```

See if facets look equally occupied, use tenure_number

```{r}
ggplot(benefits) +
  geom_histogram(aes(x = age), col = "white") + 
  facet_wrap(~ tenure_number)
```


